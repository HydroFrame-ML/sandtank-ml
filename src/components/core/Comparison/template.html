<v-card style="min-height: 175px;">
  <v-row class="my-2 mx-1 pa-2 justify-space-between d-flex">
    <div v-if="showSelection">
      <Selector :definition="model.modelSelector" style="max-width: 300px;" />
    </div>
    <div v-if="showPrediction" class="d-flex align-items-center">
      <v-col class="flex-grow-0">
        <ComputedImage
          v-if="model.values"
          :values="pressure"
          :size="model.size"
          :scale="scale"
          :convert="currentColorConvert"
          :rgb="simulationTime !== -1"
          :class="{[$style.outdated] : needRunAI}"
        />
        <v-skeleton-loader
          v-show="!model.size"
          type="image"
          :width="100 * scale"
          :height="50 * scale"
          :boilerplate="!aiLoading"
        />
        <v-row class="justify-space-between align-center pa-2">
          <v-btn
            small
            icon
            class="mr-2"
            @click="setPressure(!isPressure)"
            :disabled="!useGradientConfig.show || !model.values"
          >
            <v-icon v-show="useGradientConfig.show" v-text="`$toggle`" />
          </v-btn>
          <div class="text-h6">{{fieldName}}</div>
          <div class="body-2">t({{aiTime}})</div>
        </v-row>
      </v-col>
    </div>
    <div v-if="showDiff" class="d-flex align-items-center">
      <v-col class="flex-grow-0">
        <ComputedImage
          v-show="showDiff"
          v-if="model.values"
          :size="model.size"
          :scale="scale"
          :values="isPressure ? model.stats.presDelta : model.stats.satDelta"
          :convert="deltaToColor"
          :class="{[$style.outdated] : needRunAI || needRunSimulation}"
        />
        <v-skeleton-loader
          v-show="!model.size"
          type="image"
          :width="100 * scale"
          :height="50 * scale"
          :boilerplate="!aiLoading"
        />
        <v-row class="justify-space-between align-center pa-2">
          <div />
          <div class="text-h6">Physics vs AI</div>
          <div />
        </v-row>
      </v-col>
    </div>
    <div v-if="showHist" class="d-flex align-items-center">
      <v-col class="flex-grow-0">
        <div style="border: 1px solid grey;" v-if="model.values && isPressure">
          <Histogram
            :chart-data="model.stats.histData"
            :size="model.size"
            :scale="scale"
            :max="globalMax ? model.stats.histGlobalMax : -1"
            :class="{[$style.outdated] : needRunAI || needRunSimulation}"
            class="pa-2"
          />
        </div>
        <div style="border: 1px solid grey;" v-if="model.values && !isPressure">
          <PieChart
            :chart-data="model.stats.pieData"
            :size="model.size"
            :scale="scale"
            :class="{[$style.outdated] : needRunAI || needRunSimulation}"
          />
        </div>
        <v-skeleton-loader
          v-show="!model.size"
          type="image"
          :width="100 * scale"
          :height="50 * scale"
          :boilerplate="!aiLoading"
        />
        <v-row class="justify-space-between align-center pa-2">
          <v-btn
            small
            icon
            class="mr-2"
            @click="setGlobalMax(!globalMax)"
            v-show="isPressure && useHistGlobalMax.show"
            :disabled="!useGradientConfig.show || !model.values"
          >
            <v-icon v-show="useGradientConfig.show" v-text="`$toggle`" />
          </v-btn>
          <div v-show="!isPressure || !useHistGlobalMax.show" />
          <div class="text-h6">Distribution of errors</div>
          <div />
        </v-row>
      </v-col>
    </div>
    <div v-if="showError" class="d-flex align-items-center">
      <div
        v-if="model.stats"
        :class="{[$style.outdated] : needRunAI || needRunSimulation}"
        class="pa-2"
      >
        <v-text-field
          label="L1 error"
          :value="model.stats.l1"
          type="number"
          hide-details
          filled
          readonly
        />
        <v-text-field
          label="Lmax"
          :value="model.stats.lmax"
          type="number"
          hide-details
          filled
          readonly
        />
        <v-text-field
          label="Standard deviation"
          :value="model.stats.stdDev"
          type="number"
          hide-details
          filled
          readonly
        />
      </div>
      <v-skeleton-loader
        v-show="!model.size"
        type="image"
        :width="100 * scale"
        :height="50 * scale"
        :boilerplate="!aiLoading"
      />
    </div>
    <div v-if="showStats" class="d-flex align-items-center">
      <v-col class="flex-grow-0">
        <div style="border: 1px solid grey;" v-if="model.values && isPressure">
          <LearningGraph
            :learningData="model.learningStats"
            :size="model.size"
            :scale="scale"
          />
        </div>
        <v-skeleton-loader
          v-show="!model.size"
          type="image"
          :width="100 * scale"
          :height="50 * scale"
          :boilerplate="!aiLoading"
        />
        <v-row class="justify-space-between align-center pa-2">
          <div />
          <div class="text-h6">Learning stats</div>
          <div />
        </v-row>
      </v-col>
    </div>
  </v-row>
</v-card>
